cd "C:\Program Files\PostgreSQL\17\bin"
psql -U postgres -d postgres


CREATE ROLE himani WITH LOGIN PASSWORD '----';
ALTER ROLE himani CREATEDB CREATEROLE SUPERUSER;
CREATE DATABASE netflix_csv OWNER himani;
GRANT ALL PRIVILEGES ON DATABASE netflix_csv TO himani;
\c netflix_csv himani
CREATE TABLE netflix (
    show_id VARCHAR(10) PRIMARY KEY,
    type VARCHAR(20),
    title VARCHAR(255),
    director VARCHAR(255),
    cast VARCHAR(1000),
    country VARCHAR(255),
    date_added VARCHAR(50),
    release_year INT,
    rating VARCHAR(10),
    duration VARCHAR(50),
    listed_in VARCHAR(500),
    description TEXT
);
\copy netflix(show_id,type,title,director,cast,country,date_added,release_year,rating,duration,listed_in,description) FROM 'C:\\Users\\Himani\\Desktop\\Main Files\\Full stack\\spring-boot-proj2\\Netflix csv.csv' CSV HEADER ENCODING 'UTF8';
CREATE INDEX idx_netflix_title ON netflix (lower(title));
CREATE INDEX idx_netflix_release_year ON netflix (release_year);
CREATE INDEX idx_netflix_country ON netflix (lower(country));
GRANT SELECT, INSERT, UPDATE, DELETE ON TABLE netflix TO himani;
\q

psql -U himani -d netflix_csv -c "SELECT COUNT(*) FROM netflix;"
